<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Prioridades</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1>üìä Sistema de Prioridades</h1>
                <p class="subtitle">Gerenciamento Colaborativo de Tarefas</p>
            </div>
            <button class="btn-help" onclick="showHelp()" title="Ajuda">‚ùì Ajuda</button>
        </div>
    </header>

    <!-- Modal de Ajuda -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeHelp()">&times;</span>
            <h2>üìñ Guia de Uso do Sistema</h2>
            
            <div class="help-section">
                <h3>‚öôÔ∏è 1. Configura√ß√£o Inicial</h3>
                <p>Personalize os nomes dos 4 avaliadores conforme sua equipe. Clique em "Salvar Nomes" para aplicar as mudan√ßas.</p>
            </div>

            <div class="help-section">
                <h3>‚ûï 2. Cadastrar Tarefas</h3>
                <p>Preencha todos os campos obrigat√≥rios:</p>
                <ul>
                    <li><strong>Descri√ß√£o:</strong> Nome ou descri√ß√£o da tarefa/projeto</li>
                    <li><strong>Est√°gio:</strong> Selecione o status atual (EM EXECU√á√ÉO, ATRASADO, INICIADO, EM PLANEJAMENTO, CONCLU√çDO)</li>
                    <li><strong>Notas:</strong> Cada avaliador atribui uma nota de 1 a 5</li>
                </ul>
                <p>A m√©dia √© calculada automaticamente e determina a prioridade da tarefa.</p>
            </div>

            <div class="help-section">
                <h3>üìã 3. Gerenciar Tarefas na Lista</h3>
                <p><strong>Alterar Est√°gio:</strong> Use o dropdown na coluna "Est√°gio" para mudar rapidamente o status.</p>
                <p><strong>Editar:</strong> Clique no √≠cone ‚úèÔ∏è para modificar todos os dados da tarefa.</p>
                <p><strong>Excluir:</strong> Clique no √≠cone üóëÔ∏è para remover a tarefa (confirma√ß√£o necess√°ria).</p>
            </div>

            <div class="help-section">
                <h3>üîç 4. Filtros e Ordena√ß√£o</h3>
                <p><strong>Filtrar por Est√°gio:</strong> Selecione um est√°gio espec√≠fico no dropdown para ver apenas essas tarefas.</p>
                <p><strong>Ordena√ß√£o:</strong></p>
                <ul>
                    <li>Por padr√£o, tarefas s√£o ordenadas por <strong>prioridade</strong> (maior m√©dia primeiro)</li>
                    <li>Clique em "ORDEM ALFAB√âTICA" para ordenar por descri√ß√£o</li>
                    <li>Clique em "ORDEM POR PRIORIDADE" para voltar √† ordena√ß√£o por m√©dia</li>
                </ul>
                <p><strong>Limpar Filtros:</strong> Remove todos os filtros aplicados.</p>
            </div>

            <div class="help-section">
                <h3>üñ®Ô∏è 5. Impress√£o em PDF</h3>
                <p>Clique em "IMPRIMIR PDF" para gerar uma vers√£o otimizada para impress√£o:</p>
                <ul>
                    <li>Fonte Times New Roman, tamanho 10pt</li>
                    <li>Inclui rodap√© com data/hora de impress√£o e copyright</li>
                    <li>Na janela de impress√£o, selecione "Salvar como PDF" para gerar o arquivo</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>üé® 6. C√≥digo de Cores</h3>
                <p><strong>Est√°gios:</strong></p>
                <ul>
                    <li>üü¢ <strong>EM EXECU√á√ÉO:</strong> Verde - tarefa sendo executada</li>
                    <li>üî¥ <strong>ATRASADO:</strong> Vermelho - tarefa com atraso</li>
                    <li>‚ö™ <strong>INICIADO:</strong> Cinza claro - tarefa iniciada</li>
                    <li>üü† <strong>EM PLANEJAMENTO:</strong> Laranja - em fase de planejamento</li>
                    <li>‚ö´ <strong>CONCLU√çDO:</strong> Cinza escuro - tarefa finalizada</li>
                </ul>
                <p><strong>M√©dias:</strong></p>
                <ul>
                    <li>üü¢ Verde: M√©dia ‚â• 4 (alta prioridade)</li>
                    <li>üü° Amarelo: M√©dia entre 3 e 3.99 (m√©dia prioridade)</li>
                    <li>üî¥ Vermelho: M√©dia < 3 (baixa prioridade)</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>üíæ 7. Armazenamento de Dados</h3>
                <p>Todas as tarefas e configura√ß√µes s√£o salvas automaticamente no navegador (localStorage). Os dados permanecem mesmo ap√≥s fechar a p√°gina.</p>
                <p><strong>Aten√ß√£o:</strong> Limpar dados do navegador apagar√° todas as tarefas cadastradas.</p>
            </div>
        </div>
    </div>

    <main class="container">
        <!-- Se√ß√£o de Configura√ß√µes -->
        <section class="config-section">
            <h2>‚öôÔ∏è Configura√ß√µes de Avaliadores</h2>
            <div class="evaluators-config">
                <div class="evaluator-input">
                    <label>Avaliador 1:</label>
                    <input type="text" id="evaluator1" value="Avaliador 1">
                </div>
                <div class="evaluator-input">
                    <label>Avaliador 2:</label>
                    <input type="text" id="evaluator2" value="Avaliador 2">
                </div>
                <div class="evaluator-input">
                    <label>Avaliador 3:</label>
                    <input type="text" id="evaluator3" value="Avaliador 3">
                </div>
                <div class="evaluator-input">
                    <label>Avaliador 4:</label>
                    <input type="text" id="evaluator4" value="Avaliador 4">
                </div>
                <button class="btn btn-primary" onclick="saveEvaluatorNames()">Salvar Nomes</button>
            </div>
        </section>

        <!-- Formul√°rio de Cadastro -->
        <section class="form-section">
            <h2 id="formTitle">‚ûï Cadastrar Nova Tarefa</h2>
            <form id="taskForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskDescription">Descri√ß√£o da Tarefa *</label>
                        <input type="text" id="taskDescription" required placeholder="Digite a descri√ß√£o da tarefa">
                    </div>
                    <div class="form-group">
                        <label for="taskStage">Est√°gio *</label>
                        <select id="taskStage" required>
                            <option value="">Selecione...</option>
                            <option value="EM EXECU√á√ÉO">EM EXECU√á√ÉO</option>
                            <option value="ATRASADO">ATRASADO</option>
                            <option value="INICIADO">INICIADO</option>
                            <option value="EM PLANEJAMENTO">EM PLANEJAMENTO</option>
                            <option value="CONCLU√çDO">CONCLU√çDO</option>
                        </select>
                    </div>
                </div>

                <div class="form-row evaluations-row">
                    <div class="form-group">
                        <label for="eval1">Nota <span class="evaluator-name">Avaliador 1</span> (1-5) *</label>
                        <input type="number" id="eval1" min="1" max="5" required>
                    </div>
                    <div class="form-group">
                        <label for="eval2">Nota <span class="evaluator-name">Avaliador 2</span> (1-5) *</label>
                        <input type="number" id="eval2" min="1" max="5" required>
                    </div>
                    <div class="form-group">
                        <label for="eval3">Nota <span class="evaluator-name">Avaliador 3</span> (1-5) *</label>
                        <input type="number" id="eval3" min="1" max="5" required>
                    </div>
                    <div class="form-group">
                        <label for="eval4">Nota <span class="evaluator-name">Avaliador 4</span> (1-5) *</label>
                        <input type="number" id="eval4" min="1" max="5" required>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-success" id="submitBtn">Adicionar Tarefa</button>
                    <button type="button" class="btn btn-secondary" id="cancelBtn" onclick="cancelEdit()" style="display: none;">Cancelar</button>
                </div>
            </form>
        </section>

        <!-- Filtros e Controles -->
        <section class="controls-section">
            <h2>üîç Filtros e Controles</h2>
            <div class="controls">
                <div class="filter-group">
                    <label for="filterStage">Filtrar por Est√°gio:</label>
                    <select id="filterStage" onchange="applyFilters()">
                        <option value="">Todos os Est√°gios</option>
                        <option value="EM EXECU√á√ÉO">EM EXECU√á√ÉO</option>
                        <option value="ATRASADO">ATRASADO</option>
                        <option value="INICIADO">INICIADO</option>
                        <option value="EM PLANEJAMENTO">EM PLANEJAMENTO</option>
                        <option value="CONCLU√çDO">CONCLU√çDO</option>
                    </select>
                </div>
                <button class="btn btn-info" onclick="toggleSortOrder()">
                    <span id="sortButtonText">ORDEM ALFAB√âTICA</span>
                </button>
                <button class="btn btn-warning" onclick="clearFilters()">LIMPAR FILTROS</button>
                <button class="btn btn-success" onclick="printToPDF()">üñ®Ô∏è IMPRIMIR PDF</button>
            </div>
        </section>

        <!-- Tabela de Tarefas -->
        <section class="table-section">
            <h2>üìã Lista de Tarefas</h2>
            <div class="table-container">
                <table id="tasksTable">
                    <thead>
                        <tr>
                            <th>Est√°gio</th>
                            <th>Descri√ß√£o</th>
                            <th class="evaluator-header">Avaliador 1</th>
                            <th class="evaluator-header">Avaliador 2</th>
                            <th class="evaluator-header">Avaliador 3</th>
                            <th class="evaluator-header">Avaliador 4</th>
                            <th>M√©dia</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tasksTableBody">
                        <!-- Tarefas ser√£o inseridas aqui dinamicamente -->
                    </tbody>
                </table>
            </div>
            <div id="noTasksMessage" class="no-tasks">
                Nenhuma tarefa cadastrada. Adicione uma nova tarefa acima.
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; CECM - 2025 Sistema de Gerenciamento de Prioridades. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>
